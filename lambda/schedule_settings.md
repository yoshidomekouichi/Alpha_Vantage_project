# Lambda関数のスケジュール設定

このドキュメントでは、Lambda関数を毎朝7時に実行するためのEventBridgeスケジュール設定について説明します。

## EventBridgeのcron式

EventBridgeのcron式は以下の形式で指定します：

```
cron(分 時 日 月 曜日 年)
```

各フィールドの意味は以下の通りです：

- 分: 0-59
- 時: 0-23
- 日: 1-31
- 月: 1-12 または JAN-DEC
- 曜日: 1-7 または SUN-SAT
- 年: 1970-2199（省略可能）

## 日本時間で毎朝7時に実行する設定

EventBridgeのcron式はUTC（協定世界時）で指定します。日本はUTC+9なので、日本時間の朝7時はUTCの22時（前日）になります。

したがって、日本時間で毎朝7時に実行するには、以下のcron式を使用します：

```
cron(0 22 * * ? *)
```

この式の意味は以下の通りです：

- 0: 毎時0分
- 22: UTC 22時（日本時間の翌日7時）
- *: 毎日
- *: 毎月
- ?: 曜日は指定しない（日を指定する場合は?を使用）
- *: 毎年

## 他の時間帯の例

| 日本時間 | UTC時間 | cron式 |
|---------|--------|--------|
| 朝7時    | 前日22時 | `cron(0 22 * * ? *)` |
| 朝9時    | 前日0時  | `cron(0 0 * * ? *)` |
| 正午12時 | 前日3時  | `cron(0 3 * * ? *)` |
| 夕方18時 | 前日9時  | `cron(0 9 * * ? *)` |
| 夜21時   | 前日12時 | `cron(0 12 * * ? *)` |

## 特定の曜日のみ実行する設定

特定の曜日のみ実行する場合は、曜日フィールドに値を指定します。例えば、平日（月曜から金曜）の朝7時に実行する場合は以下のようになります：

```
cron(0 22 ? * MON-FRI *)
```

## 複数の時間に実行する設定

複数の時間に実行する場合は、複数のEventBridgeルールを作成します。例えば、朝7時と夕方18時に実行する場合は、以下の2つのルールを作成します：

1. 朝7時のルール: `cron(0 22 * * ? *)`
2. 夕方18時のルール: `cron(0 9 * * ? *)`

## スケジュール設定の注意点

- EventBridgeのcron式はUTCで指定するため、日本時間との時差（+9時間）を考慮する必要があります。
- 日本時間の0時から9時までは、UTCでは前日の15時から24時になります。
- 閏年や夏時間の変更は自動的に処理されます。
- EventBridgeのcron式は、標準的なUnixのcron式と若干異なる部分があります。特に、曜日フィールドの扱いが異なります。
