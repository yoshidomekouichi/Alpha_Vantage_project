<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta charset="UTF-8">
  <title>Alpha Vantage株価データパイプライン 学習ガイド</title>
  <!-- テーマの追加 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify-darklight-theme@latest/dist/style.min.css" title="docsify-darklight-theme" type="text/css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    /* カスタムスタイル */
    :root {
      --theme-color: #4d8cf4;
      --sidebar-width: 300px;
      --heading-h1-font-size: 2rem;
      --heading-h2-font-size: 1.75rem;
      --heading-h3-font-size: 1.5rem;
      --heading-h4-font-size: 1.25rem;
      --navbar-height: 60px;
      
      /* One Dark Pro テーマの色 */
      --one-dark-bg: #282c34;
      --one-dark-text: #abb2bf;
      --one-dark-accent: #61afef;
      --one-dark-highlight: #e5c07b;
      --one-dark-comment: #5c6370;
      --one-dark-selection: #3e4451;
      --one-dark-border: #181a1f;
    }
    
    /* ダークモード用の変数 */
    body[data-theme="dark"] {
      --theme-color: #61afef;
      --background: #282c34;
      --text-color: #abb2bf;
      --sidebar-background: #21252b;
      --sidebar-border-color: #181a1f;
      --code-background: #2c313a;
      --navbar-background: #21252b;
      --navbar-text: #abb2bf;
      --search-background: #2c313a;
      --search-text: #abb2bf;
      --search-border: #181a1f;
    }
    
    /* モバイル向けのカスタムスタイル */
    @media screen and (max-width: 768px) {
      .markdown-section {
        padding: 30px 15px;
      }
      .sidebar {
        width: 250px;
      }
      .app-name-link img {
        max-width: 80%;
      }
      /* モバイル向けのナビゲーションバーの調整 */
      .navbar {
        padding: 0 10px;
      }
      .navbar-buttons {
        margin-right: 5px;
      }
      /* サイドバーが開いている時のコンテンツエリアの調整 */
      body.close .content {
        transform: translateX(250px);
      }
    }
    
    /* コードブロックの横スクロール */
    .markdown-section pre > code {
      white-space: pre;
      overflow-x: auto;
      border-radius: 8px;
    }
    
    /* 画像の最大幅を設定 */
    .markdown-section img {
      max-width: 100%;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    /* リンクのホバー効果 */
    .markdown-section a {
      transition: all 0.3s ease;
    }
    .markdown-section a:hover {
      text-decoration: none;
      opacity: 0.8;
    }
    
    /* サイドバーのスタイル改善 */
    .sidebar ul li {
      margin: 6px 0;
    }
    .sidebar ul li a {
      font-size: 1rem;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
    }
    .sidebar ul li a:hover {
      text-decoration: none;
      transform: translateX(3px);
    }
    .sidebar ul li.active > a {
      font-weight: 600;
    }
    
    /* 目次のネスト表示を改善 */
    .sidebar-nav > ul > li > ul {
      padding-left: 15px;
    }
    
    /* ヘッダーとフッターのスタイル */
    .app-nav {
      position: fixed;
      top: 0;
      right: 0;
      z-index: 100;
      padding: 10px 20px;
    }
    
    /* コンテンツの読みやすさ向上 */
    .markdown-section {
      max-width: 900px;
      margin: 0 auto;
      line-height: 1.7;
      padding-top: calc(var(--navbar-height) + 20px); /* ナビゲーションバーの高さ分余白を追加 */
    }
    .markdown-section p {
      margin: 1.2em 0;
    }
    .markdown-section h1, 
    .markdown-section h2, 
    .markdown-section h3, 
    .markdown-section h4 {
      margin-top: 1.5em;
      margin-bottom: 0.8em;
      font-weight: 600;
    }
    
    /* テーブルのスタイル改善 */
    .markdown-section table {
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .markdown-section tr:nth-child(2n) {
      background-color: rgba(0, 0, 0, 0.03);
    }
    body[data-theme="dark"] .markdown-section tr:nth-child(2n) {
      background-color: rgba(255, 255, 255, 0.03);
    }
    
    /* ダークモードの背景と文字色を強制的に適用 */
    body[data-theme="dark"] {
      background-color: var(--one-dark-bg) !important;
      color: var(--one-dark-text) !important;
    }
    
    /* ダークモード時のコンテンツエリアの背景色 */
    body[data-theme="dark"] .content {
      background-color: var(--one-dark-bg) !important;
    }
    
    /* ダークモード時のサイドバーの背景色 */
    body[data-theme="dark"] .sidebar {
      background-color: var(--sidebar-background) !important;
      color: var(--one-dark-text) !important;
      border-right-color: var(--one-dark-border) !important;
    }
    
    /* ダークモード時のコードブロックの背景色 */
    body[data-theme="dark"] .markdown-section pre {
      background-color: var(--code-background) !important;
    }
    
    /* ダークモード時のインラインコードの背景色 */
    body[data-theme="dark"] .markdown-section code {
      background-color: var(--code-background) !important;
    }
    
    /* ブログ風デザインの追加スタイル */
    .markdown-section {
      font-family: 'Hiragino Kaku Gothic ProN', 'Meiryo', sans-serif;
      line-height: 1.8;
    }
    
    .markdown-section h1, 
    .markdown-section h2, 
    .markdown-section h3, 
    .markdown-section h4 {
      font-weight: 700;
      letter-spacing: 0.02em;
      position: relative;
      padding-bottom: 0.5em;
      margin-bottom: 1.2em;
    }
    
    .markdown-section h2 {
      border-bottom: 2px solid var(--theme-color);
    }
    
    .markdown-section h3 {
      border-left: 4px solid var(--theme-color);
      padding-left: 12px;
    }
    
    .markdown-section blockquote {
      border-left: 4px solid var(--theme-color);
      color: #666;
      padding: 10px 15px;
      background-color: rgba(0, 0, 0, 0.03);
      margin: 1.5em 0;
    }
    
    body[data-theme="dark"] .markdown-section blockquote {
      color: #aaa;
      background-color: rgba(255, 255, 255, 0.03);
    }
    
    /* リンクスタイルの改善 */
    .markdown-section a {
      color: var(--theme-color);
      text-decoration: none;
      border-bottom: 1px dotted var(--theme-color);
      padding-bottom: 1px;
    }
    
    .markdown-section a:hover {
      border-bottom: 1px solid var(--theme-color);
      opacity: 0.8;
    }
    
    /* 固定ナビゲーションバー */
    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: var(--navbar-height);
      background-color: white;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
      z-index: 200;
      transition: all 0.3s ease;
    }
    
    body[data-theme="dark"] .navbar {
      background-color: var(--navbar-background);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }
    
    .navbar-brand {
      display: flex;
      align-items: center;
      font-size: 1.2rem;
      font-weight: 600;
    }
    
    .navbar-brand img {
      height: 30px;
      margin-right: 10px;
    }
    
    .navbar-buttons {
      display: flex;
      align-items: center;
    }
    
    .navbar-button {
      background: none;
      border: none;
      color: #606c71;
      font-size: 1.1rem;
      cursor: pointer;
      margin-left: 15px;
      padding: 5px;
      border-radius: 4px;
      transition: all 0.2s ease;
    }
    
    body[data-theme="dark"] .navbar-button {
      color: var(--navbar-text);
    }
    
    .navbar-button:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }
    
    body[data-theme="dark"] .navbar-button:hover {
      background-color: rgba(255, 255, 255, 0.05);
    }
    
    /* 検索ボックスのスタイル改善 */
    .search {
      border-bottom: 1px solid #eaecef;
      padding: 10px 15px;
      position: relative;
    }
    
    body[data-theme="dark"] .search {
      border-bottom-color: var(--sidebar-border-color);
    }
    
    .search input {
      width: 100%;
      padding: 10px 30px 10px 15px;
      border-radius: 20px;
      border: 1px solid #e1e4e8;
      background-color: #f6f8fa;
      color: #24292e;
      font-size: 0.9rem;
      outline: none;
      transition: all 0.2s ease;
    }
    
    body[data-theme="dark"] .search input {
      background-color: var(--search-background);
      border-color: var(--search-border);
      color: var(--search-text);
    }
    
    .search input:focus {
      border-color: var(--theme-color);
      box-shadow: 0 0 0 2px rgba(66, 185, 131, 0.2);
    }
    
    .search .clear-button {
      position: absolute;
      right: 25px;
      top: 50%;
      transform: translateY(-50%);
      color: #999;
      cursor: pointer;
    }
    
    /* モバイルでのサイドバートグルボタンの改善 */
    .sidebar-toggle {
      background-color: transparent;
      border: 0;
      outline: none;
      padding: 10px;
      position: absolute;
      bottom: auto;
      left: auto;
      top: 0;
      z-index: 300;
    }
    
    .sidebar-toggle span {
      background-color: var(--theme-color);
      display: block;
      margin-bottom: 4px;
      width: 20px;
      height: 2px;
    }
    
    /* 目次のアイコン追加 */
    .sidebar-nav li a:before {
      content: "\f15c";
      font-family: 'Font Awesome 6 Free';
      font-weight: 400;
      margin-right: 8px;
      color: #999;
    }
    
    .sidebar-nav li a[href*="プロジェクト概要"]:before {
      content: "\f02d";
      font-weight: 900;
    }
    
    .sidebar-nav li a[href*="設定管理"]:before {
      content: "\f085";
      font-weight: 900;
    }
    
    .sidebar-nav li a[href*="API"]:before {
      content: "\f1e6";
      font-weight: 900;
    }
    
    .sidebar-nav li a[href*="データ"]:before {
      content: "\f1c0";
      font-weight: 900;
    }
    
    .sidebar-nav li a[href*="ストレージ"]:before {
      content: "\f0c2";
      font-weight: 900;
    }
    
    .sidebar-nav li a[href*="ロギング"]:before {
      content: "\f15c";
      font-weight: 900;
    }
    
    .sidebar-nav li a[href*="通知"]:before {
      content: "\f0f3";
      font-weight: 900;
    }
    
    .sidebar-nav li a[href*="スクリプト"]:before {
      content: "\f121";
      font-weight: 900;
    }
    
    .sidebar-nav li a[href*="Lambda"]:before {
      content: "\f135";
      font-weight: 900;
    }
    
    /* 進捗表示バー */
    .progress-bar {
      position: fixed;
      top: var(--navbar-height);
      left: 0;
      height: 3px;
      background-color: var(--theme-color);
      z-index: 999;
      transition: width 0.2s, opacity 0.2s;
      opacity: 0;
    }
    
    /* スクロールトップボタン */
    .scroll-to-top {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background-color: var(--theme-color);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      opacity: 0;
      transition: opacity 0.3s;
      z-index: 100;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }
    
    .scroll-to-top.visible {
      opacity: 1;
    }
    
    /* モバイルでのサイドバー表示改善 */
    @media screen and (max-width: 768px) {
      body.close .sidebar {
        transform: translateX(0);
      }
      
      .sidebar {
        transform: translateX(-100%);
        transition: transform 0.3s ease;
      }
      
      .content {
        transition: transform 0.3s ease;
      }
      
      .sidebar-toggle {
        position: fixed;
        top: 10px;
        left: 10px;
        z-index: 300;
      }
    }
  </style>
</head>
<body>
  <!-- 固定ナビゲーションバー -->
  <div class="navbar">
    <div class="navbar-brand">
      <span>Alpha Vantage学習ガイド</span>
    </div>
    <div class="navbar-buttons">
      <button class="navbar-button toggle-sidebar-button" aria-label="Toggle Sidebar">
        <i class="fas fa-bars"></i>
      </button>
      <button class="navbar-button toggle-search-button" aria-label="Toggle Search">
        <i class="fas fa-search"></i>
      </button>
      <button class="navbar-button toggle-theme-button" aria-label="Toggle Theme">
        <i class="fas fa-moon"></i>
      </button>
    </div>
  </div>
  
  <!-- 進捗表示バー -->
  <div class="progress-bar"></div>
  
  <!-- スクロールトップボタン -->
  <div class="scroll-to-top">
    <i class="fas fa-arrow-up"></i>
  </div>
  
  <div id="app"></div>
  
  <script>
    window.$docsify = {
      name: 'Alpha Vantage学習ガイド',
      repo: 'yoshidomekouichi/data_engineering_tutorial',
      loadSidebar: 'SUMMARY.md',
      subMaxLevel: 3,
      auto2top: true,
      search: {
        maxAge: 86400000,
        paths: 'auto',
        placeholder: '検索',
        noData: '結果がありません',
        depth: 6
      },
      pagination: {
        previousText: '前へ',
        nextText: '次へ',
        crossChapter: true
      },
      copyCode: {
        buttonText: 'コピー',
        errorText: 'エラー',
        successText: 'コピーしました'
      },
      // ダークモード設定
      darklightTheme: {
        defaultTheme: 'dark', // デフォルトをダークモードに変更
        siteFont: 'Source Sans Pro, Helvetica Neue, Arial, sans-serif',
        codeFontFamily: 'Roboto Mono, Monaco, courier, monospace',
        bodyFontSize: '16px',
        dark: {
          background: '#0d1117',
          textColor: '#c9d1d9',
          codeBackgroundColor: '#1f2937',
          codeTextColor: '#e6e6e6',
          blockQuoteColor: '#8b949e',
          highlightColor: '#e3b341',
          sidebarSublink: '#8b949e',
          codeTypeColor: '#ffffff',
          coverBackground: 'linear-gradient(to left bottom, hsl(118, 100%, 85%) 0%,hsl(181, 100%, 85%) 100%)',
          toogleBackground: '#ffffff'
        },
        light: {
          background: 'white',
          textColor: '#34495e',
          codeBackgroundColor: '#f8f8f8',
          codeTextColor: '#525252',
          blockQuoteColor: '#858585',
          highlightColor: '#d22778',
          sidebarSublink: '#505d6b',
          codeTypeColor: '#091a28',
          coverBackground: 'linear-gradient(to left bottom, hsl(118, 100%, 85%) 0%,hsl(181, 100%, 85%) 100%)',
          toogleBackground: '#091a28'
        }
      },
      plugins: [
        function(hook, vm) {
          hook.beforeEach(function(html) {
            return html + '\n\n----\n\n' +
              '<div style="text-align: center; margin-top: 30px;">' +
              '最終更新: ' + new Date().toLocaleDateString('ja-JP') +
              '</div>';
          });
        }
      ]
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/docsify@4"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify/lib/plugins/zoom-image.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify-copy-code"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify-pagination/dist/docsify-pagination.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-python.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-json.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-yaml.min.js"></script>
  <!-- ダークモード切替スクリプト -->
  <script src="https://cdn.jsdelivr.net/npm/docsify-darklight-theme@latest/dist/index.min.js"></script>
  
  <!-- インラインJavaScriptを直接記述 -->
  <script>
    // グローバル変数
    var sidebarOpen = false;
    var searchVisible = false;
    
    // ページ読み込み完了後に実行
    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOM fully loaded');
      
      // ダークモードを強制的に適用
      localStorage.setItem('DARK_LIGHT_THEME', 'dark');
      document.body.setAttribute('data-theme', 'dark');
    });
    
    // docsifyのロード完了後に実行
    window.addEventListener('load', function() {
      console.log('Window fully loaded');
      
      // ダークモードを定期的に確認して適用
      var checkInterval = setInterval(function() {
        if (document.body.getAttribute('data-theme') !== 'dark') {
          document.body.setAttribute('data-theme', 'dark');
        } else {
          clearInterval(checkInterval);
        }
      }, 500);
      
      // 検索ボックスを初期状態で非表示に
      setTimeout(function() {
        var searchBox = document.querySelector('.search');
        if (searchBox) {
          searchBox.style.display = 'none';
          searchVisible = false;
        }
      }, 500);
      
      // 直接ボタンにイベントリスナーを設定
      setupButtonListeners();
      
      // 1秒後に再度試行（docsifyの初期化完了を待つ）
      setTimeout(setupButtonListeners, 1000);
      
      // 3秒後に再度試行（最終的な保険）
      setTimeout(setupButtonListeners, 3000);
    });
    
    // ボタンのイベントリスナーを設定
    function setupButtonListeners() {
      console.log('Setting up button listeners');
      
      // サイドバートグルボタン
      var sidebarToggleBtn = document.querySelector('.toggle-sidebar-button');
      if (sidebarToggleBtn) {
        console.log('Sidebar toggle button found');
        
        // 既存のイベントリスナーを削除
        sidebarToggleBtn.removeEventListener('click', toggleSidebar);
        
        // 新しいイベントリスナーを追加
        sidebarToggleBtn.addEventListener('click', toggleSidebar);
        
        // モバイルでのタッチイベントも追加
        sidebarToggleBtn.addEventListener('touchend', function(e) {
          e.preventDefault();
          toggleSidebar();
        });
      }
      
      // 検索ボタン
      var searchToggleBtn = document.querySelector('.toggle-search-button');
      if (searchToggleBtn) {
        console.log('Search toggle button found');
        
        // 既存のイベントリスナーを削除
        searchToggleBtn.removeEventListener('click', toggleSearch);
        
        // 新しいイベントリスナーを追加
        searchToggleBtn.addEventListener('click', toggleSearch);
        
        // モバイルでのタッチイベントも追加
        searchToggleBtn.addEventListener('touchend', function(e) {
          e.preventDefault();
          toggleSearch();
        });
      }
      
      // テーマ切り替えボタン
      var themeToggleBtn = document.querySelector('.toggle-theme-button');
      if (themeToggleBtn) {
        console.log('Theme toggle button found');
        
        // 既存のイベントリスナーを削除
        themeToggleBtn.removeEventListener('click', toggleTheme);
        
        // 新しいイベントリスナーを追加
        themeToggleBtn.addEventListener('click', toggleTheme);
        
        // モバイルでのタッチイベントも追加
        themeToggleBtn.addEventListener('touchend', function(e) {
          e.preventDefault();
          toggleTheme();
        });
      }
      
      // スクロールトップボタン
      var scrollTopBtn = document.querySelector('.scroll-to-top');
      if (scrollTopBtn) {
        console.log('Scroll to top button found');
        
        // 既存のイベントリスナーを削除
        scrollTopBtn.removeEventListener('click', scrollToTop);
        
        // 新しいイベントリスナーを追加
        scrollTopBtn.addEventListener('click', scrollToTop);
        
        // モバイルでのタッチイベントも追加
        scrollTopBtn.addEventListener('touchend', function(e) {
          e.preventDefault();
          scrollToTop();
        });
      }
      
      // スクロールイベント
      window.addEventListener('scroll', handleScroll);
    }
    
    // サイドバーの表示/非表示を切り替える関数
    function toggleSidebar() {
      console.log('Toggle sidebar called');
      sidebarOpen = !sidebarOpen;
      
      if (sidebarOpen) {
        document.body.classList.add('close');
      } else {
        document.body.classList.remove('close');
      }
      
      // モバイルでのサイドバー表示
      var sidebar = document.querySelector('.sidebar');
      if (sidebar) {
        if (sidebarOpen) {
          sidebar.style.transform = 'translateX(0)';
        } else {
          sidebar.style.transform = 'translateX(-100%)';
        }
      }
    }
    
    // 検索ボックスの表示/非表示を切り替える関数
    function toggleSearch() {
      console.log('Toggle search called');
      searchVisible = !searchVisible;
      
      var searchBox = document.querySelector('.search');
      if (searchBox) {
        searchBox.style.display = searchVisible ? 'block' : 'none';
      }
    }
    
    // テーマを切り替える関数
    function toggleTheme() {
      console.log('Toggle theme called');
      var currentTheme = document.body.getAttribute('data-theme');
      var newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      
      document.body.setAttribute('data-theme', newTheme);
      localStorage.setItem('DARK_LIGHT_THEME', newTheme);
      
      // アイコンの切り替え
      var icon = document.querySelector('.toggle-theme-button i');
      if (icon) {
        if (newTheme === 'dark') {
          icon.classList.remove('fa-sun');
          icon.classList.add('fa-moon');
        } else {
          icon.classList.remove('fa-moon');
          icon.classList.add('fa-sun');
        }
      }
    }
    
    // トップにスクロールする関数
    function scrollToTop() {
      console.log('Scroll to top called');
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    }
    
    // スクロールイベントを処理する関数
    function handleScroll() {
      var scrollTopBtn = document.querySelector('.scroll-to-top');
      if (scrollTopBtn) {
        if (window.pageYOffset > 300) {
          scrollTopBtn.classList.add('visible');
        } else {
          scrollTopBtn.classList.remove('visible');
        }
      }
      
      // 進捗バーの更新
      var progressBar = document.querySelector('.progress-bar');
      if (progressBar) {
        var totalHeight = document.body.scrollHeight - window.innerHeight;
        var progress = (window.pageYOffset / totalHeight) * 100;
        progressBar.style.width = progress + '%';
        progressBar.style.opacity = 1;
      }
    }
  </script>
</body>
</html>
